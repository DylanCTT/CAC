CONT EQU 10h
COMP EQU 11H
EOI EQU 20H
IMR EQU 21H
INT1 EQU 25H
IDTIMER EQU 10
ORG 40
POS_GESTOR_TIMER DW GESTOR_TIMER
ORG 1000H
MENSAJE DB " Vamos las interrupciones!"
FIN DB ?
TERMINE DB 0


ORG 3000H
GESTOR_TIMER: MOV BX, OFFSET MENSAJE
MOV AX, OFFSET FIN -OFFSET MENSAJE
INT 7
MOV AL, 0
OUT CONT, AL
ADD TERMINE, 1

MOV AL, 20H
OUT EOI, AL
IRET


ORG 2000H
CLI

MOV AL, 11111101B
OUT IMR, AL ;ACTIVO TIMER

MOV AL, 10
OUT INT1, AL ;MANDO ID DE TIMER

MOV AL, 0
OUT CONT, AL ;CONFIGURO EL TIMER

MOV AL, 2
OUT COMP, AL

STI

LOOP: 
CMP TERMINE, 1
JNZ LOOP

HLT
END
